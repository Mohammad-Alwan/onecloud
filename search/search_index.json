{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Introduction","text":"Welcome Guys         This is my space \ud83d\ude01"},{"location":"#content","title":"Content","text":"<ul> <li><code>Findings</code> </li> <li><code>Troubleshooting</code> </li> <li><code>Experiments</code></li> <li><code>Notes to Remember</code></li> </ul> Getting Started <p> Update SSL</p> <p>Warning</p> <p>The notes and documentation here are based on cases from my lab, troubleshooting activities, and work tasks that have been successfully completed. Use additional sources as references.</p>"},{"location":"Update-SSL/","title":"Update SSL","text":"<p>Info</p> <p>This is an example for server that uses the httpd service listens on port 443.</p>"},{"location":"Update-SSL/#action-to-check-expired-certificates","title":"Action to check expired certificates","text":"<pre><code>site=\"&lt;ip-server&gt;\" ; port=\"443\" ;echo | openssl s_client -servername $site -connect $site:$port | openssl x509 -noout -dates\n</code></pre>"},{"location":"Update-SSL/#scp-cert-from-local-to-target","title":"SCP Cert from Local to Target","text":"<pre><code>scp -r /path/to/source/ user@&lt;server&gt;:/path/to/target\n</code></pre>"},{"location":"Update-SSL/#create-backup-cert","title":"Create Backup Cert","text":"<p>Note</p> <p>In this example, the SSL httpd service configuration uses the certificate in /etc/ssl/.</p> <pre><code>cd /etc/ssl\nmkdir ssl_backup\ncp -pfv &lt;current-cert&gt; ssl_backup/\n</code></pre>"},{"location":"Update-SSL/#change-the-old-certificate-to-the-new-one","title":"Change the Old Certificate to the New One","text":"<p>Note</p> <p>The source path is taken from the previous SCP result.</p> <pre><code>sudo cp -v path/to/source /etc/ssl/\n</code></pre>"},{"location":"Update-SSL/#check-ssl-expiration-in-the-target-server","title":"Check SSL expiration in the target server","text":"PEMJKS <pre><code>openssl x509 -noout -in cert.pem -dates\nopenssl x509 -noout -in cert.pem -text\n</code></pre> <pre><code>(for cert java)\nkeytool -list -v -keystore cert.jks | less\n</code></pre>"},{"location":"Update-SSL/#restart-or-reload-service","title":"Restart or Reload Service","text":"<pre><code>systemctl restart httpd.service\n\n-or-\n\nsystemctl reload httpd.service\n</code></pre>"},{"location":"extend-disk/","title":"RHEL OS cannot boot normally (/sysroot: can't read superblock)","text":""},{"location":"extend-disk/#issue","title":"Issue","text":"<p>The RHEL operating system cannot boot normally, experiencing a stuck state due to a mount error <code>/sysroot: can't read superblock on /dev/mapper/os-lv_root.</code></p> Error (1/3)Error (2/3)Error (3/3) <p></p> <p></p> <p></p>"},{"location":"extend-disk/#troubleshooting-steps","title":"Troubleshooting Steps","text":"<ol> <li> <p>Boot into rescue mode How to boot RHEL to Rescue Mode</p> </li> <li> <p>Extend LV /dev/mapper/os-lv_root menjadi 125G    <pre><code>vgchange -ay\nlvextend -L 125G /dev/mapper/os-lv_root\n</code></pre></p> </li> <li> <p>Resize the filesystem by using the xfs_growfs command    <pre><code>xfs_growfs /dev/mapper/os-lv_root\n</code></pre></p> </li> </ol>"},{"location":"extend-disk/#root-cause","title":"Root Cause","text":"<p>The system requires 80G on the root LV (<code>dev/mapper/os-lv_root</code>), but the root LV is only 71G in size.</p>"},{"location":"fsck-root/","title":"Corrupted inodes","text":""},{"location":"fsck-root/#issue","title":"Issue","text":""},{"location":"fsck-root/#troubleshoot-steps","title":"Troubleshoot Steps","text":"<ol> <li> <p>Check mount status root filesystem (/) <pre><code>findmnt /\n</code></pre></p> </li> <li> <p>If the root filesystem is mounted as read-write (rw), remount it as read-only (ro) <pre><code>mount -o remount,ro /\n</code></pre></p> </li> <li> <p>Filesystem check and repair on root logical volume  <pre><code>fsck -y /dev/mapper/system-rootlv\n</code></pre></p> </li> <li> <p>Reboot server  <pre><code>reboot\n</code></pre></p> </li> </ol>"},{"location":"fsck-root/#root-cause","title":"Root Cause","text":"<p>Info</p> <p>The cause of this problem is still under discussion</p>"},{"location":"os-failed/","title":"RHEL OS failed to boot, got stuck (crowdstrike service) and the OS shut down immediately","text":""},{"location":"os-failed/#issue","title":"Issue","text":"<p>The RHEL OS running on top of openstack failed to boot, got stuck (crowdstrike service) and the OS shut down immediately. The logs for this event could not be collected even with rescue mode.</p>"},{"location":"os-failed/#troubleshooting-steps","title":"Troubleshooting Steps","text":"<ol> <li>Boot into rescue mode using rd.break, then check the disk space utilization. <pre><code>df -TH \n</code></pre> Observe disk usage with a percentage usage of up to 100%. </li> </ol> <p>Note</p> <p>In this case I found that /var/log/audit was full.</p> <ol> <li> <p>Free up space for the /var/log/audit/ partition and reboot the node <pre><code>sudo rm -f /var/log/audit/audit.log.*\n</code></pre></p> </li> <li> <p>Change Audit Rules Configuration to prevent the system halt when the /var/log/audit/ full <pre><code>vi /etc/audit/auditd.conf\n</code></pre> <pre><code>disk_full_action = ignore\n</code></pre></p> </li> </ol>"},{"location":"os-failed/#root-cause","title":"Root Cause","text":"<p>This issue caused by audit rule policy trigger the operating system going halt when /var/log/audit/ full. /var/log/audit full caused by there is massive increasing log on /var/log/audit which make the 2 partition was full. After free up the space for /var/log/audit problem solved. And to prevent the same issue appear in the future we change the audit rule policy.</p>"},{"location":"pending-Ansible/","title":"Inventory Pending Deletion in Ansible Automation Platform","text":""},{"location":"pending-Ansible/#load-django-shell","title":"Load Django Shell","text":"<pre><code>sudo awx-manage shell_plus\n</code></pre>"},{"location":"pending-Ansible/#display-inventory","title":"Display inventory","text":"<p><pre><code>from awx.main.models import Inventory\n</code></pre> <pre><code>Inventory.objects.all()\n</code></pre></p>"},{"location":"pending-Ansible/#delete-inventory-based-on-id","title":"Delete inventory based on id","text":"<pre><code>Inventory.objects.filter(id=168).delete()\n</code></pre>"},{"location":"pending-Ansible/#display-inventory-pending-delete","title":"Display inventory (pending delete)","text":"<pre><code>Inventory.objects.filter(pending_deletion=True)\n</code></pre>"},{"location":"reset-admin-AAP/","title":"Reset Admin user password for Ansible Automation Platform","text":""},{"location":"reset-admin-AAP/#login-to-hub-server","title":"Login to Hub server","text":"<p>Log in to the Automation Hub Server if using a cluster installation.</p>"},{"location":"reset-admin-AAP/#steps-to-reset-the-admin","title":"Steps to reset the Admin","text":"<pre><code>$ sudo su -\n# export PULP_SETTINGS=/etc/pulp/settings.py\n# pulpcore-manager reset-admin-password\nPlease enter new password for user \"admin\": \nPlease enter new password for user \"admin\" again: \nSuccessfully set password for \"admin\" user.\n# exit\n</code></pre>"},{"location":"swap-not-found/","title":"RHEL 10.1 OS stuck during boot (/dev/os/lv_swap does not exist)","text":""},{"location":"swap-not-found/#issue","title":"Issue","text":"<p>The RHEL operating system is stuck during the boot process because <code>/dev/os/lv_swap does not exist</code>. </p>"},{"location":"swap-not-found/#troubleshooting-steps","title":"Troubleshooting Steps","text":"<ol> <li> <p>Mount LV root to /sysroot directory and change root environment    <pre><code>mount /dev/mapper/rhel-root /sysroot\nchroot /sysroot\n</code></pre></p> </li> <li> <p>Delete the configuration or add a <code>#</code> at the beginning of the line for swap /dev/os/lv_swap in /etc/fstab.    <pre><code>vi /etc/fstab\n-from-\nUUID=&lt;UUID swap&gt;        none        swap        defaults 0 0 \n-to-\n#UUID=&lt;UUID swap&gt;       none        swap        defaults 0 0\n</code></pre></p> </li> <li> <p>Mount the sysfs filesystem to the /sys directory     <pre><code>mount -t sysfs sysfs /sys \n</code></pre></p> </li> <li>Mount the devtmpfs filesystem to the /dev directory     <pre><code>mount -t devtmpfs devtmpfs /dev\n</code></pre></li> <li> <p>Mount the boot partition to the /boot directory.    <pre><code>mount /dev/sda3 /boot\n</code></pre></p> </li> <li> <p>Change boot entry parameters in the file /boot/loader/entries/*6.12.0-124.8.1.el10_1.x86_64.conf</p> </li> </ol> <p>Before</p> <pre><code>title Red Hat Enterprise Linux (6.12.0-124.8.1.el10_1.x86_64) 10.1 (Coughlan)\nversion 6.12.0-124.8.1.el10_1.x86_64\nlinux /vmlinuz-6.12.0-124.8.1.el10_1.x86_64\ninitrd /initramfs-6.12.0-124.8.1.el10_1.x86_64.img $tuned_initrd\noptions root=/dev/mapper/rhel-root ro crashkernel=2G-64G:256M,64G-:512M resume=UUID=7f25641d-62ff-4960-8f4c-adb9925918df rd.lvm.lv=rhel/root rd.lvm.lv=os/lv_swap rd.lvm.lv=rhel/swap rhgb quiet\ngrub_users $grub_users\ngrub_arg --unrestricted\ngrub_class rhel\n</code></pre> <p>After</p> <pre><code>title Red Hat Enterprise Linux (6.12.0-124.8.1.el10_1.x86_64) 10.1 (Coughlan)\nversion 6.12.0-124.8.1.el10_1.x86_64\nlinux /vmlinuz-6.12.0-124.8.1.el10_1.x86_64\ninitrd /initramfs-6.12.0-124.8.1.el10_1.x86_64.img $tuned_initrd\noptions root=/dev/mapper/rhel-root ro crashkernel=2G-64G:256M,64G-:512M rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet\ngrub_users $grub_users\ngrub_arg --unrestricted\ngrub_class rhel\n</code></pre>"},{"location":"swap-not-found/#root-cause","title":"Root Cause","text":"<p>The /etc/fstab configuration and boot entry parameters still reference the lv_swap logical volume(/dev/os/lv_swap), even though it no longer exists.</p>"}]}